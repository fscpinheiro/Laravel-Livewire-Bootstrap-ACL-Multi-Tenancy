!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FormValidation={})}(this,function(e){"use strict";function t(e){for(var t=e.length,i=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],n=0,a=0;t--;)a+=i[n][parseInt(e.charAt(t),10)],n=1-n;return a%10==0&&a>0}function i(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,i){return t.__proto__=i,t})(e,t)}function d(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t=function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function i(){var n,a=s(e);if(t){var l=s(this).constructor;n=Reflect.construct(a,arguments,l)}else n=a.apply(this,arguments);return function e(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw TypeError("Derived constructors may only return object or undefined");return d(t)}(this,n)}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function e(t,i){if(t){if("string"==typeof t)return u(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,i)}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,l=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw l}}}}function h(e,t,i,n){var a=(i.getAttribute("type")||"").toLowerCase(),l=i.tagName.toLowerCase();if("textarea"===l)return i.value;if("select"===l){var r=i,s=r.selectedIndex;return s>=0?r.options.item(s).value:""}if("input"===l){if("radio"!==a&&"checkbox"!==a)return i.value;var o=n.filter(function(e){return e.checked}).length;return 0===o?"":o+""}return""}function v(e,t){var i=Array.isArray(t)?t:[t],n=e;return i.forEach(function(e){n=n.replace("%s",e)}),n}function m(e,t){if("function"==typeof e)return e.apply(this,t);if("string"==typeof e){var i=e;"()"===i.substring(i.length-2)&&(i=i.substring(0,i.length-2));var n,a=i.split("."),l=a.pop(),r=window,s=f(a);try{for(s.s();!(n=s.n()).done;)r=r[n.value]}catch(o){s.e(o)}finally{s.f()}return void 0===r[l]?null:r[l].apply(this,t)}}var g={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DANKORT:{length:[16],prefix:["5019"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},ELO:{length:[16],prefix:["4011","4312","4389","4514","4573","4576","5041","5066","5067","509","6277","6362","6363","650","6516","6550"]},FORBRUGSFORENINGEN:{length:[16],prefix:["600722"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","5868","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]},VISA_ELECTRON:{length:[16],prefix:["4026","417500","4405","4508","4844","4913","4917"]}};function p(e,t,i,n){if(isNaN(e)||isNaN(t)||isNaN(i)||e<1e3||e>9999||t<=0||t>12||i<=0||i>[31,e%400==0||e%100!=0&&e%4==0?29:28,31,30,31,30,31,31,30,31,30,31][t-1])return!1;if(!0===n){var a=new Date,l=a.getFullYear(),r=a.getMonth(),s=a.getDate();return e<l||e===l&&t-1<r||e===l&&t-1===r&&i<s}return!0}function $(e,t){return new Promise(function(i,n){var a=Object.assign({},{crossDomain:!1,headers:{},method:"GET",params:{}},t),l=Object.keys(a.params).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(a.params[e]))}).join("&"),r=e.indexOf("?"),s="GET"===a.method?"".concat(e).concat(r?"?":"&").concat(l):e;if(a.crossDomain){var o=document.createElement("script"),d="___FormValidationFetch_".concat(Array(12).fill("").map(function(e){return Math.random().toString(36).charAt(2)}).join(""),"___");window[d]=function(e){delete window[d],i(e)},o.src="".concat(s).concat(r?"&":"?","callback=").concat(d),o.async=!0,o.addEventListener("load",function(){o.parentNode.removeChild(o)}),o.addEventListener("error",function(){return n}),document.head.appendChild(o)}else{var c,u=new XMLHttpRequest;u.open(a.method,s),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===a.method&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Object.keys(a.headers).forEach(function(e){return u.setRequestHeader(e,a.headers[e])}),u.addEventListener("load",function(){i(JSON.parse(this.responseText))}),u.addEventListener("error",function(){return n}),u.send(Object.keys(c=a.params).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(c[e]))}).join("&"))}})}var _={between:function e(){var t=function e(t){return parseFloat("".concat(t).replace(",","."))};return{validate:function e(i){var n=i.value;if(""===n)return{valid:!0};var a=Object.assign({},{inclusive:!0,message:""},i.options),l=t(a.min),r=t(a.max);return a.inclusive?{message:v(i.l10n?a.message||i.l10n.between.default:a.message,["".concat(l),"".concat(r)]),valid:parseFloat(n)>=l&&parseFloat(n)<=r}:{message:v(i.l10n?a.message||i.l10n.between.notInclusive:a.message,["".concat(l),"".concat(r)]),valid:parseFloat(n)>l&&parseFloat(n)<r}}}},blank:function e(){return{validate:function e(t){return{valid:!0}}}},callback:function e(){return{validate:function e(t){var i=m(t.options.callback,[t]);return"boolean"==typeof i?{valid:i}:i}}},choice:function e(){return{validate:function e(t){var i="select"===t.element.tagName.toLowerCase()?t.element.querySelectorAll("option:checked").length:t.elements.filter(function(e){return e.checked}).length,n=t.options.min?"".concat(t.options.min):"",a=t.options.max?"".concat(t.options.max):"",l=t.l10n?t.options.message||t.l10n.choice.default:t.options.message,r=!(n&&i<parseInt(n,10)||a&&i>parseInt(a,10));switch(!0){case!!n&&!!a:l=v(t.l10n?t.l10n.choice.between:t.options.message,[n,a]);break;case!!n:l=v(t.l10n?t.l10n.choice.more:t.options.message,n);break;case!!a:l=v(t.l10n?t.l10n.choice.less:t.options.message,a)}return{message:l,valid:r}}}},creditCard:function e(){return{validate:function e(i){if(""===i.value)return{meta:{type:null},valid:!0};if(/[^0-9-\s]+/.test(i.value))return{meta:{type:null},valid:!1};var n=i.value.replace(/\D/g,"");if(!t(n))return{meta:{type:null},valid:!1};for(var a=0,l=Object.keys(g);a<l.length;a++){var r=l[a];for(var s in g[r].prefix)if(i.value.substr(0,g[r].prefix[s].length)===g[r].prefix[s]&&-1!==g[r].length.indexOf(n.length))return{meta:{type:r},valid:!0}}return{meta:{type:null},valid:!1}}}},date:function e(){var t=function e(t,i,n){var a=i.indexOf("YYYY"),l=i.indexOf("MM"),r=i.indexOf("DD");if(-1===a||-1===l||-1===r)return null;var s=t.split(" "),o=s[0].split(n);if(o.length<3)return null;var d=new Date(parseInt(o[a],10),parseInt(o[l],10)-1,parseInt(o[r],10));if(s.length>1){var c=s[1].split(":");d.setHours(c.length>0?parseInt(c[0],10):0),d.setMinutes(c.length>1?parseInt(c[1],10):0),d.setSeconds(c.length>2?parseInt(c[2],10):0)}return d},i=function e(t,i){var n=i.replace(/Y/g,"y").replace(/M/g,"m").replace(/D/g,"d").replace(/:m/g,":M").replace(/:mm/g,":MM").replace(/:S/,":s").replace(/:SS/,":ss"),e=t.getDate(),a=e<10?"0".concat(e):e,l=t.getMonth()+1,r=l<10?"0".concat(l):l,s="".concat(t.getFullYear()).substr(2),o=t.getFullYear(),d=t.getHours()%12||12,c=d<10?"0".concat(d):d,u=t.getHours(),f=u<10?"0".concat(u):u,h=t.getMinutes(),v=h<10?"0".concat(h):h,m=t.getSeconds(),g=m<10?"0".concat(m):m,p={H:"".concat(u),HH:"".concat(f),M:"".concat(h),MM:"".concat(v),d:"".concat(e),dd:"".concat(a),h:"".concat(d),hh:"".concat(c),m:"".concat(l),mm:"".concat(r),s:"".concat(m),ss:"".concat(g),yy:"".concat(s),yyyy:"".concat(o)};return n.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMs])\1?|"[^"]*"|'[^']*'/g,function(e){return p[e]?p[e]:e.slice(1,e.length-1)})};return{validate:function e(n){if(""===n.value)return{meta:{date:null},valid:!0};var a=Object.assign({},{format:n.element&&"date"===n.element.getAttribute("type")?"YYYY-MM-DD":"MM/DD/YYYY",message:""},n.options),l=n.l10n?n.l10n.date.default:a.message,r={message:"".concat(l),meta:{date:null},valid:!1},s=a.format.split(" "),o=s.length>1?s[1]:null,d=s.length>2?s[2]:null,c=n.value.split(" "),u=c[0],f=c.length>1?c[1]:null;if(s.length!==c.length)return r;var h=a.separator||(-1!==u.indexOf("/")?"/":-1!==u.indexOf("-")?"-":-1!==u.indexOf(".")?".":"/");if(null===h||-1===u.indexOf(h))return r;var m=u.split(h),g=s[0].split(h);if(m.length!==g.length)return r;var $=m[g.indexOf("YYYY")],_=m[g.indexOf("MM")],y=m[g.indexOf("DD")];if(!/^\d+$/.test($)||!/^\d+$/.test(_)||!/^\d+$/.test(y)||$.length>4||_.length>2||y.length>2)return r;var b=parseInt($,10),k=parseInt(_,10),E=parseInt(y,10);if(!p(b,k,E))return r;var V=new Date(b,k-1,E);if(o){var A=f.split(":");if(o.split(":").length!==A.length)return r;var F=A.length>0?A[0].length<=2&&/^\d+$/.test(A[0])?parseInt(A[0],10):-1:0,C=A.length>1?A[1].length<=2&&/^\d+$/.test(A[1])?parseInt(A[1],10):-1:0,H=A.length>2?A[2].length<=2&&/^\d+$/.test(A[2])?parseInt(A[2],10):-1:0;if(-1===F||-1===C||-1===H||H<0||H>60||F<0||F>=24||d&&F>12||C<0||C>59)return r;V.setHours(F),V.setMinutes(C),V.setSeconds(H)}var x="function"==typeof a.min?a.min():a.min,I=x instanceof Date?x:x?t(x,g,h):V,w="function"==typeof a.max?a.max():a.max,S=w instanceof Date?w:w?t(w,g,h):V,N=x instanceof Date?i(I,a.format):x,L=w instanceof Date?i(S,a.format):w;switch(!0){case!!N&&!L:return{message:v(n.l10n?n.l10n.date.min:l,N),meta:{date:V},valid:V.getTime()>=I.getTime()};case!!L&&!N:return{message:v(n.l10n?n.l10n.date.max:l,L),meta:{date:V},valid:V.getTime()<=S.getTime()};case!!L&&!!N:return{message:v(n.l10n?n.l10n.date.range:l,[N,L]),meta:{date:V},valid:V.getTime()<=S.getTime()&&V.getTime()>=I.getTime()};default:return{message:"".concat(l),meta:{date:V},valid:!0}}}}},different:function e(){return{validate:function e(t){var i="function"==typeof t.options.compare?t.options.compare.call(this):t.options.compare;return{valid:""===i||t.value!==i}}}},digits:function e(){return{validate:function e(t){return{valid:""===t.value||/^\d+$/.test(t.value)}}}},emailAddress:function e(){var t=function e(t,i){for(var n=t.split(/"/),a=n.length,l=[],r="",s=0;s<a;s++)if(s%2==0){var o=n[s].split(i),d=o.length;if(1===d)r+=o[0];else{l.push(r+o[0]);for(var c=1;c<d-1;c++)l.push(o[c]);r=o[d-1]}}else r+='"'+n[s],s<a-1&&(r+='"');return l.push(r),l};return{validate:function e(i){if(""===i.value)return{valid:!0};var n=Object.assign({},{multiple:!1,separator:/[,;]/},i.options),a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(!(!0===n.multiple||"true"==="".concat(n.multiple)))return{valid:a.test(i.value)};for(var l=n.separator||/[,;]/,r=t(i.value,l),s=r.length,o=0;o<s;o++)if(!a.test(r[o]))return{valid:!1};return{valid:!0}}}},file:function e(){return{validate:function e(t){if(""===t.value)return{valid:!0};var i,n=t.options.extension?t.options.extension.toLowerCase().split(","):null,a=t.options.type?t.options.type.toLowerCase().split(","):null;if(window.File&&window.FileList&&window.FileReader){var l=t.element.files,r=l.length,s=0;if(t.options.maxFiles&&r>parseInt("".concat(t.options.maxFiles),10))return{meta:{error:"INVALID_MAX_FILES"},valid:!1};if(t.options.minFiles&&r<parseInt("".concat(t.options.minFiles),10))return{meta:{error:"INVALID_MIN_FILES"},valid:!1};for(var o={},d=0;d<r;d++){if(s+=l[d].size,o={ext:i=l[d].name.substr(l[d].name.lastIndexOf(".")+1),file:l[d],size:l[d].size,type:l[d].type},t.options.minSize&&l[d].size<parseInt("".concat(t.options.minSize),10))return{meta:Object.assign({},{error:"INVALID_MIN_SIZE"},o),valid:!1};if(t.options.maxSize&&l[d].size>parseInt("".concat(t.options.maxSize),10))return{meta:Object.assign({},{error:"INVALID_MAX_SIZE"},o),valid:!1};if(n&&-1===n.indexOf(i.toLowerCase()))return{meta:Object.assign({},{error:"INVALID_EXTENSION"},o),valid:!1};if(l[d].type&&a&&-1===a.indexOf(l[d].type.toLowerCase()))return{meta:Object.assign({},{error:"INVALID_TYPE"},o),valid:!1}}if(t.options.maxTotalSize&&s>parseInt("".concat(t.options.maxTotalSize),10))return{meta:Object.assign({},{error:"INVALID_MAX_TOTAL_SIZE",totalSize:s},o),valid:!1};if(t.options.minTotalSize&&s<parseInt("".concat(t.options.minTotalSize),10))return{meta:Object.assign({},{error:"INVALID_MIN_TOTAL_SIZE",totalSize:s},o),valid:!1}}else if(i=t.value.substr(t.value.lastIndexOf(".")+1),n&&-1===n.indexOf(i.toLowerCase()))return{meta:{error:"INVALID_EXTENSION",ext:i},valid:!1};return{valid:!0}}}},greaterThan:function e(){return{validate:function e(t){if(""===t.value)return{valid:!0};var i=Object.assign({},{inclusive:!0,message:""},t.options),n=parseFloat("".concat(i.min).replace(",","."));return i.inclusive?{message:v(t.l10n?i.message||t.l10n.greaterThan.default:i.message,"".concat(n)),valid:parseFloat(t.value)>=n}:{message:v(t.l10n?i.message||t.l10n.greaterThan.notInclusive:i.message,"".concat(n)),valid:parseFloat(t.value)>n}}}},identical:function e(){return{validate:function e(t){var i="function"==typeof t.options.compare?t.options.compare.call(this):t.options.compare;return{valid:""===i||t.value===i}}}},integer:function e(){return{validate:function e(t){if(""===t.value)return{valid:!0};var i=Object.assign({},{decimalSeparator:".",thousandsSeparator:""},t.options),n="."===i.decimalSeparator?"\\.":i.decimalSeparator,a="."===i.thousandsSeparator?"\\.":i.thousandsSeparator,l=RegExp("^-?[0-9]{1,3}(".concat(a,"[0-9]{3})*(").concat(n,"[0-9]+)?$")),r=RegExp(a,"g"),s="".concat(t.value);if(!l.test(s))return{valid:!1};a&&(s=s.replace(r,"")),n&&(s=s.replace(n,"."));var o=parseFloat(s);return{valid:!isNaN(o)&&isFinite(o)&&Math.floor(o)===o}}}},ip:function e(){return{validate:function e(t){if(""===t.value)return{valid:!0};var i=Object.assign({},{ipv4:!0,ipv6:!0},t.options),n=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\/([0-9]|[1-2][0-9]|3[0-2]))?$/,a=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*(\/(\d|\d\d|1[0-1]\d|12[0-8]))?$/;switch(!0){case i.ipv4&&!i.ipv6:return{message:t.l10n?i.message||t.l10n.ip.ipv4:i.message,valid:n.test(t.value)};case!i.ipv4&&i.ipv6:return{message:t.l10n?i.message||t.l10n.ip.ipv6:i.message,valid:a.test(t.value)};case i.ipv4&&i.ipv6:default:return{message:t.l10n?i.message||t.l10n.ip.default:i.message,valid:n.test(t.value)||a.test(t.value)}}}}},lessThan:function e(){return{validate:function e(t){if(""===t.value)return{valid:!0};var i=Object.assign({},{inclusive:!0,message:""},t.options),n=parseFloat("".concat(i.max).replace(",","."));return i.inclusive?{message:v(t.l10n?i.message||t.l10n.lessThan.default:i.message,"".concat(n)),valid:parseFloat(t.value)<=n}:{message:v(t.l10n?i.message||t.l10n.lessThan.notInclusive:i.message,"".concat(n)),valid:parseFloat(t.value)<n}}}},notEmpty:function e(){return{validate:function e(t){var i=!!t.options&&!!t.options.trim,n=t.value;return{valid:!i&&""!==n||i&&""!==n&&""!==n.trim()}}}},numeric:function e(){return{validate:function e(t){if(""===t.value)return{valid:!0};var i=Object.assign({},{decimalSeparator:".",thousandsSeparator:""},t.options),n="".concat(t.value);n.substr(0,1)===i.decimalSeparator?n="0".concat(i.decimalSeparator).concat(n.substr(1)):n.substr(0,2)==="-".concat(i.decimalSeparator)&&(n="-0".concat(i.decimalSeparator).concat(n.substr(2)));var a="."===i.decimalSeparator?"\\.":i.decimalSeparator,l="."===i.thousandsSeparator?"\\.":i.thousandsSeparator,r=RegExp("^-?[0-9]{1,3}(".concat(l,"[0-9]{3})*(").concat(a,"[0-9]+)?$")),s=RegExp(l,"g");if(!r.test(n))return{valid:!1};l&&(n=n.replace(s,"")),a&&(n=n.replace(a,"."));var o=parseFloat(n);return{valid:!isNaN(o)&&isFinite(o)}}}},promise:function e(){return{validate:function e(t){return m(t.options.promise,[t])}}},regexp:function e(){return{validate:function e(t){if(""===t.value)return{valid:!0};var i=t.options.regexp;if(i instanceof RegExp)return{valid:i.test(t.value)};var n=i.toString();return{valid:(t.options.flags?RegExp(n,t.options.flags):RegExp(n)).test(t.value)}}}},remote:function e(){var t={crossDomain:!1,data:{},headers:{},method:"GET",validKey:"valid"};return{validate:function e(i){if(""===i.value)return Promise.resolve({valid:!0});var n=Object.assign({},t,i.options),a=n.data;return"function"==typeof n.data&&(a=n.data.call(this,i)),"string"==typeof a&&(a=JSON.parse(a)),a[n.name||i.field]=i.value,$("function"==typeof n.url?n.url.call(this,i):n.url,{crossDomain:n.crossDomain,headers:n.headers,method:n.method,params:a}).then(function(e){return Promise.resolve({message:e.message,meta:e,valid:"true"==="".concat(e[n.validKey])})}).catch(function(e){return Promise.reject({valid:!1})})}}},stringCase:function e(){return{validate:function e(t){if(""===t.value)return{valid:!0};var i=Object.assign({},{case:"lower"},t.options),n=(i.case||"lower").toLowerCase();return{message:i.message||(t.l10n?"upper"===n?t.l10n.stringCase.upper:t.l10n.stringCase.default:i.message),valid:"upper"===n?t.value===t.value.toUpperCase():t.value===t.value.toLowerCase()}}}},stringLength:function e(){var t=function e(t){for(var e=t.length,i=t.length-1;i>=0;i--){var n=t.charCodeAt(i);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&i--}return"".concat(e)};return{validate:function e(i){var n=Object.assign({},{message:"",trim:!1,utf8Bytes:!1},i.options),a=!0===n.trim||"true"==="".concat(n.trim)?i.value.trim():i.value;if(""===a)return{valid:!0};var l=n.min?"".concat(n.min):"",r=n.max?"".concat(n.max):"",s=n.utf8Bytes?t(a):a.length,o=!0,d=i.l10n?n.message||i.l10n.stringLength.default:n.message;switch((l&&s<parseInt(l,10)||r&&s>parseInt(r,10))&&(o=!1),!0){case!!l&&!!r:d=v(i.l10n?n.message||i.l10n.stringLength.between:n.message,[l,r]);break;case!!l:d=v(i.l10n?n.message||i.l10n.stringLength.more:n.message,"".concat(parseInt(l,10)));break;case!!r:d=v(i.l10n?n.message||i.l10n.stringLength.less:n.message,"".concat(parseInt(r,10)))}return{message:d,valid:o}}}},uri:function e(){var t={allowEmptyProtocol:!1,allowLocal:!1,protocol:"http, https, ftp"};return{validate:function e(i){if(""===i.value)return{valid:!0};var n=Object.assign({},t,i.options),a=!0===n.allowLocal||"true"==="".concat(n.allowLocal),l=!0===n.allowEmptyProtocol||"true"==="".concat(n.allowEmptyProtocol);return{valid:RegExp("^(?:(?:"+n.protocol.split(",").join("|").replace(/\s/g,"")+")://)"+(l?"?":"")+"(?:\\S+(?::\\S*)?@)?(?:"+(a?"":"(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})")+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+(a?"?":"")+")(?::\\d{2,5})?(?:/[^\\s]*)?$","i").test(i.value)}}}}},y=function(){function e(t,n){i(this,e),this.elements={},this.ee={fns:{},clear:function e(){this.fns={}},emit:function e(t){for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];(this.fns[t]||[]).map(function(e){return e.apply(e,n)})},off:function e(t,i){if(this.fns[t]){var n=this.fns[t].indexOf(i);n>=0&&this.fns[t].splice(n,1)}},on:function e(t,i){(this.fns[t]=this.fns[t]||[]).push(i)}},this.filter={filters:{},add:function e(t,i){(this.filters[t]=this.filters[t]||[]).push(i)},clear:function e(){this.filters={}},execute:function e(t,i,n){if(!this.filters[t]||!this.filters[t].length)return i;for(var a=i,l=this.filters[t],r=l.length,s=0;s<r;s++)a=l[s].apply(a,n);return a},remove:function e(t,i){this.filters[t]&&(this.filters[t]=this.filters[t].filter(function(e){return e!==i}))}},this.plugins={},this.results=new Map,this.validators={},this.form=t,this.fields=n}return a(e,[{key:"on",value:function e(t,i){return this.ee.on(t,i),this}},{key:"off",value:function e(t,i){return this.ee.off(t,i),this}},{key:"emit",value:function e(t){for(var i,n=arguments.length,a=Array(n>1?n-1:0),l=1;l<n;l++)a[l-1]=arguments[l];return(i=this.ee).emit.apply(i,[t].concat(a)),this}},{key:"registerPlugin",value:function e(t,i){if(this.plugins[t])throw Error("The plguin ".concat(t," is registered"));return i.setCore(this),i.install(),this.plugins[t]=i,this}},{key:"deregisterPlugin",value:function e(t){var i=this.plugins[t];return i&&i.uninstall(),delete this.plugins[t],this}},{key:"registerValidator",value:function e(t,i){if(this.validators[t])throw Error("The validator ".concat(t," is registered"));return this.validators[t]=i,this}},{key:"registerFilter",value:function e(t,i){return this.filter.add(t,i),this}},{key:"deregisterFilter",value:function e(t,i){return this.filter.remove(t,i),this}},{key:"executeFilter",value:function e(t,i,n){return this.filter.execute(t,i,n)}},{key:"addField",value:function e(t,i){var n=Object.assign({},{selector:"",validators:{}},i);return this.fields[t]=this.fields[t]?{selector:n.selector||this.fields[t].selector,validators:Object.assign({},this.fields[t].validators,n.validators)}:n,this.elements[t]=this.queryElements(t),this.emit("core.field.added",{elements:this.elements[t],field:t,options:this.fields[t]}),this}},{key:"removeField",value:function e(t){if(!this.fields[t])throw Error("The field ".concat(t," validators are not defined. Please ensure the field is added first"));var i=this.elements[t],n=this.fields[t];return delete this.elements[t],delete this.fields[t],this.emit("core.field.removed",{elements:i,field:t,options:n}),this}},{key:"validate",value:function e(){var t=this;return this.emit("core.form.validating",{formValidation:this}),this.filter.execute("validate-pre",Promise.resolve(),[]).then(function(){return Promise.all(Object.keys(t.fields).map(function(e){return t.validateField(e)})).then(function(e){switch(!0){case -1!==e.indexOf("Invalid"):return t.emit("core.form.invalid",{formValidation:t}),Promise.resolve("Invalid");case -1!==e.indexOf("NotValidated"):return t.emit("core.form.notvalidated",{formValidation:t}),Promise.resolve("NotValidated");default:return t.emit("core.form.valid",{formValidation:t}),Promise.resolve("Valid")}})})}},{key:"validateField",value:function e(t){var i=this,n=this.results.get(t);if("Valid"===n||"Invalid"===n)return Promise.resolve(n);this.emit("core.field.validating",t);var a=this.elements[t];if(0===a.length)return this.emit("core.field.valid",t),Promise.resolve("Valid");var l=a[0].getAttribute("type");return"radio"===l||"checkbox"===l||1===a.length?this.validateElement(t,a[0]):Promise.all(a.map(function(e){return i.validateElement(t,e)})).then(function(e){switch(!0){case -1!==e.indexOf("Invalid"):return i.emit("core.field.invalid",t),i.results.set(t,"Invalid"),Promise.resolve("Invalid");case -1!==e.indexOf("NotValidated"):return i.emit("core.field.notvalidated",t),i.results.delete(t),Promise.resolve("NotValidated");default:return i.emit("core.field.valid",t),i.results.set(t,"Valid"),Promise.resolve("Valid")}})}},{key:"validateElement",value:function e(t,i){var n=this;this.results.delete(t);var a=this.elements[t];if(this.filter.execute("element-ignored",!1,[t,i,a]))return this.emit("core.element.ignored",{element:i,elements:a,field:t}),Promise.resolve("Ignored");var l=this.fields[t].validators;this.emit("core.element.validating",{element:i,elements:a,field:t});var r=Object.keys(l).map(function(e){return function(){return n.executeValidator(t,i,e,l[e])}});return this.waterfall(r).then(function(e){var l=-1===e.indexOf("Invalid");n.emit("core.element.validated",{element:i,elements:a,field:t,valid:l});var r=i.getAttribute("type");return("radio"===r||"checkbox"===r||1===a.length)&&n.emit(l?"core.field.valid":"core.field.invalid",t),Promise.resolve(l?"Valid":"Invalid")}).catch(function(e){return n.emit("core.element.notvalidated",{element:i,elements:a,field:t}),Promise.resolve(e)})}},{key:"executeValidator",value:function e(t,i,n,a){var l=this,r=this.elements[t],s=this.filter.execute("validator-name",n,[n,t]);if(a.message=this.filter.execute("validator-message",a.message,[this.locale,t,s]),!this.validators[s]||!1===a.enabled)return this.emit("core.validator.validated",{element:i,elements:r,field:t,result:this.normalizeResult(t,s,{valid:!0}),validator:s}),Promise.resolve("Valid");var o=this.validators[s],d=this.getElementValue(t,i,s);if(!this.filter.execute("field-should-validate",!0,[t,i,d,n]))return this.emit("core.validator.notvalidated",{element:i,elements:r,field:t,validator:n}),Promise.resolve("NotValidated");this.emit("core.validator.validating",{element:i,elements:r,field:t,validator:n});var c=o().validate({element:i,elements:r,field:t,l10n:this.localization,options:a,value:d});if("function"==typeof c.then)return c.then(function(e){var a=l.normalizeResult(t,n,e);return l.emit("core.validator.validated",{element:i,elements:r,field:t,result:a,validator:n}),a.valid?"Valid":"Invalid"});var u=this.normalizeResult(t,n,c);return this.emit("core.validator.validated",{element:i,elements:r,field:t,result:u,validator:n}),Promise.resolve(u.valid?"Valid":"Invalid")}},{key:"getElementValue",value:function e(t,i,n){var a=h(this.form,t,i,this.elements[t]);return this.filter.execute("field-value",a,[a,t,i,n])}},{key:"getElements",value:function e(t){return this.elements[t]}},{key:"getFields",value:function e(){return this.fields}},{key:"getFormElement",value:function e(){return this.form}},{key:"getLocale",value:function e(){return this.locale}},{key:"getPlugin",value:function e(t){return this.plugins[t]}},{key:"updateFieldStatus",value:function e(t,i,n){var a=this,l=this.elements[t],r=l[0].getAttribute("type");if(("radio"===r||"checkbox"===r?[l[0]]:l).forEach(function(e){return a.updateElementStatus(t,e,i,n)}),n)"Invalid"===i&&(this.emit("core.field.invalid",t),this.results.set(t,"Invalid"));else switch(i){case"NotValidated":this.emit("core.field.notvalidated",t),this.results.delete(t);break;case"Validating":this.emit("core.field.validating",t),this.results.delete(t);break;case"Valid":this.emit("core.field.valid",t),this.results.set(t,"Valid");break;case"Invalid":this.emit("core.field.invalid",t),this.results.set(t,"Invalid")}return this}},{key:"updateElementStatus",value:function e(t,i,n,a){var l=this,r=this.elements[t],s=this.fields[t].validators,o=a?[a]:Object.keys(s);switch(n){case"NotValidated":o.forEach(function(e){return l.emit("core.validator.notvalidated",{element:i,elements:r,field:t,validator:e})}),this.emit("core.element.notvalidated",{element:i,elements:r,field:t});break;case"Validating":o.forEach(function(e){return l.emit("core.validator.validating",{element:i,elements:r,field:t,validator:e})}),this.emit("core.element.validating",{element:i,elements:r,field:t});break;case"Valid":o.forEach(function(e){return l.emit("core.validator.validated",{element:i,elements:r,field:t,result:{message:s[e].message,valid:!0},validator:e})}),this.emit("core.element.validated",{element:i,elements:r,field:t,valid:!0});break;case"Invalid":o.forEach(function(e){return l.emit("core.validator.validated",{element:i,elements:r,field:t,result:{message:s[e].message,valid:!1},validator:e})}),this.emit("core.element.validated",{element:i,elements:r,field:t,valid:!1})}return this}},{key:"resetForm",value:function e(t){var i=this;return Object.keys(this.fields).forEach(function(e){return i.resetField(e,t)}),this.emit("core.form.reset",{formValidation:this,reset:t}),this}},{key:"resetField",value:function e(t,i){if(i){var n=this.elements[t],a=n[0].getAttribute("type");n.forEach(function(e){"radio"===a||"checkbox"===a?(e.removeAttribute("selected"),e.removeAttribute("checked"),e.checked=!1):(e.setAttribute("value",""),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(e.value=""))})}return this.updateFieldStatus(t,"NotValidated"),this.emit("core.field.reset",{field:t,reset:i}),this}},{key:"revalidateField",value:function e(t){return this.fields[t]?(this.updateFieldStatus(t,"NotValidated"),this.validateField(t)):Promise.resolve("Ignored")}},{key:"disableValidator",value:function e(t,i){if(!this.fields[t])return this;var n=this.elements[t];return this.toggleValidator(!1,t,i),this.emit("core.validator.disabled",{elements:n,field:t,formValidation:this,validator:i}),this}},{key:"enableValidator",value:function e(t,i){if(!this.fields[t])return this;var n=this.elements[t];return this.toggleValidator(!0,t,i),this.emit("core.validator.enabled",{elements:n,field:t,formValidation:this,validator:i}),this}},{key:"updateValidatorOption",value:function e(t,i,n,a){return this.fields[t]&&this.fields[t].validators&&this.fields[t].validators[i]&&(this.fields[t].validators[i][n]=a),this}},{key:"setFieldOptions",value:function e(t,i){return this.fields[t]=i,this}},{key:"destroy",value:function e(){var t=this;return Object.keys(this.plugins).forEach(function(e){return t.plugins[e].uninstall()}),this.ee.clear(),this.filter.clear(),this.results.clear(),this.plugins={},this}},{key:"setLocale",value:function e(t,i){return this.locale=t,this.localization=i,this}},{key:"waterfall",value:function e(t){return t.reduce(function(e,t){return e.then(function(e){return t().then(function(t){return e.push(t),e})})},Promise.resolve([]))}},{key:"queryElements",value:function e(t){var i=this.fields[t].selector?"#"===this.fields[t].selector.charAt(0)?'[id="'.concat(this.fields[t].selector.substring(1),'"]'):this.fields[t].selector:'[name="'.concat(t,'"]');return[].slice.call(this.form.querySelectorAll(i))}},{key:"normalizeResult",value:function e(t,i,n){var a=this.fields[t].validators[i];return Object.assign({},n,{message:n.message||(a?a.message:"")||(this.localization&&this.localization[i]&&this.localization[i].default?this.localization[i].default:"")||"The field ".concat(t," is not valid")})}},{key:"toggleValidator",value:function e(t,i,n){var a=this,l=this.fields[i].validators;return n&&l&&l[n]?this.fields[i].validators[n].enabled=t:n||Object.keys(l).forEach(function(e){return a.fields[i].validators[e].enabled=t}),this.updateFieldStatus(i,"NotValidated",n)}}]),e}(),b=function(){function e(t){i(this,e),this.opts=t}return a(e,[{key:"setCore",value:function e(t){return this.core=t,this}},{key:"install",value:function e(){}},{key:"uninstall",value:function e(){}}]),e}(),k=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).opts=e||{},a.validatorNameFilter=a.getValidatorName.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.core.registerFilter("validator-name",this.validatorNameFilter)}},{key:"uninstall",value:function e(){this.core.deregisterFilter("validator-name",this.validatorNameFilter)}},{key:"getValidatorName",value:function e(t,i){return this.opts[t]||t}}]),n}(b),E=function(e){r(n,e);var t=c(n);function n(){var e;return i(this,n),(e=t.call(this,{})).elementValidatedHandler=e.onElementValidated.bind(d(e)),e.fieldValidHandler=e.onFieldValid.bind(d(e)),e.fieldInvalidHandler=e.onFieldInvalid.bind(d(e)),e.messageDisplayedHandler=e.onMessageDisplayed.bind(d(e)),e}return a(n,[{key:"install",value:function e(){this.core.on("core.field.valid",this.fieldValidHandler).on("core.field.invalid",this.fieldInvalidHandler).on("core.element.validated",this.elementValidatedHandler).on("plugins.message.displayed",this.messageDisplayedHandler)}},{key:"uninstall",value:function e(){this.core.off("core.field.valid",this.fieldValidHandler).off("core.field.invalid",this.fieldInvalidHandler).off("core.element.validated",this.elementValidatedHandler).off("plugins.message.displayed",this.messageDisplayedHandler)}},{key:"onElementValidated",value:function e(t){t.valid&&(t.element.setAttribute("aria-invalid","false"),t.element.removeAttribute("aria-describedby"))}},{key:"onFieldValid",value:function e(t){var i=this.core.getElements(t);i&&i.forEach(function(e){e.setAttribute("aria-invalid","false"),e.removeAttribute("aria-describedby")})}},{key:"onFieldInvalid",value:function e(t){var i=this.core.getElements(t);i&&i.forEach(function(e){return e.setAttribute("aria-invalid","true")})}},{key:"onMessageDisplayed",value:function e(t){t.messageElement.setAttribute("role","alert"),t.messageElement.setAttribute("aria-hidden","false");var i=this.core.getElements(t.field),n=i.indexOf(t.element),a="js-fv-".concat(t.field,"-").concat(n,"-").concat(Date.now(),"-message");t.messageElement.setAttribute("id",a),t.element.setAttribute("aria-describedby",a);var l=t.element.getAttribute("type");("radio"===l||"checkbox"===l)&&i.forEach(function(e){return e.setAttribute("aria-describedby",a)})}}]),n}(b),V=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).addedFields=new Map,a.opts=Object.assign({},{html5Input:!1,pluginPrefix:"data-fvp-",prefix:"data-fv-"},e),a.fieldAddedHandler=a.onFieldAdded.bind(d(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(d(a)),a}return a(n,[{key:"install",value:function e(){var t=this;this.parsePlugins();var i=this.parseOptions();Object.keys(i).forEach(function(e){t.addedFields.has(e)||t.addedFields.set(e,!0),t.core.addField(e,i[e])}),this.core.on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}},{key:"uninstall",value:function e(){this.addedFields.clear(),this.core.off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"onFieldAdded",value:function e(t){var i=this,n=t.elements;!(!n||0===n.length||this.addedFields.has(t.field))&&(this.addedFields.set(t.field,!0),n.forEach(function(e){var n=i.parseElement(e);if(!i.isEmptyOption(n)){var a={selector:t.options.selector,validators:Object.assign({},t.options.validators||{},n.validators)};i.core.setFieldOptions(t.field,a)}}))}},{key:"onFieldRemoved",value:function e(t){t.field&&this.addedFields.has(t.field)&&this.addedFields.delete(t.field)}},{key:"parseOptions",value:function e(){var t=this,i=this.opts.prefix,n={},a=this.core.getFields(),l=this.core.getFormElement();return[].slice.call(l.querySelectorAll("[name], [".concat(i,"field]"))).forEach(function(e){var a=t.parseElement(e);if(!t.isEmptyOption(a)){var l=e.getAttribute("name")||e.getAttribute("".concat(i,"field"));n[l]=Object.assign({},n[l],a)}}),Object.keys(n).forEach(function(e){Object.keys(n[e].validators).forEach(function(t){n[e].validators[t].enabled=n[e].validators[t].enabled||!1,a[e]&&a[e].validators&&a[e].validators[t]&&Object.assign(n[e].validators[t],a[e].validators[t])})}),Object.assign({},a,n)}},{key:"createPluginInstance",value:function e(t,i){for(var n=t.split("."),a=window||this,l=0,r=n.length;l<r;l++)a=a[n[l]];if("function"!=typeof a)throw Error("the plugin ".concat(t," doesn't exist"));return new a(i)}},{key:"parsePlugins",value:function e(){for(var t=this,i=this.core.getFormElement(),n=RegExp("^".concat(this.opts.pluginPrefix,"([a-z0-9-]+)(___)*([a-z0-9-]+)*$")),a=i.attributes.length,r={},s=0;s<a;s++){var o=i.attributes[s].name,d=i.attributes[s].value,c=n.exec(o);if(c&&4===c.length){var u=this.toCamelCase(c[1]);r[u]=Object.assign({},c[3]?l({},this.toCamelCase(c[3]),d):{enabled:""===d||"true"===d},r[u])}}Object.keys(r).forEach(function(e){var i=r[e],n=i.enabled,a=i.class;if(n&&a){delete i.enabled,delete i.clazz;var l=t.createPluginInstance(a,i);t.core.registerPlugin(e,l)}})}},{key:"isEmptyOption",value:function e(t){var i=t.validators;return 0===Object.keys(i).length&&i.constructor===Object}},{key:"parseElement",value:function e(t){for(var i=RegExp("^".concat(this.opts.prefix,"([a-z0-9-]+)(___)*([a-z0-9-]+)*$")),n=t.attributes.length,a={},r=t.getAttribute("type"),s=0;s<n;s++){var o=t.attributes[s].name,d=t.attributes[s].value;if(this.opts.html5Input)switch(!0){case"minlength"===o:a.stringLength=Object.assign({},{enabled:!0,min:parseInt(d,10)},a.stringLength);break;case"maxlength"===o:a.stringLength=Object.assign({},{enabled:!0,max:parseInt(d,10)},a.stringLength);break;case"pattern"===o:a.regexp=Object.assign({},{enabled:!0,regexp:d},a.regexp);break;case"required"===o:a.notEmpty=Object.assign({},{enabled:!0},a.notEmpty);break;case"type"===o&&"color"===d:a.color=Object.assign({},{enabled:!0,type:"hex"},a.color);break;case"type"===o&&"email"===d:a.emailAddress=Object.assign({},{enabled:!0},a.emailAddress);break;case"type"===o&&"url"===d:a.uri=Object.assign({},{enabled:!0},a.uri);break;case"type"===o&&"range"===d:a.between=Object.assign({},{enabled:!0,max:parseFloat(t.getAttribute("max")),min:parseFloat(t.getAttribute("min"))},a.between);break;case"min"===o&&"date"!==r&&"range"!==r:a.greaterThan=Object.assign({},{enabled:!0,min:parseFloat(d)},a.greaterThan);break;case"max"===o&&"date"!==r&&"range"!==r:a.lessThan=Object.assign({},{enabled:!0,max:parseFloat(d)},a.lessThan)}var c=i.exec(o);if(c&&4===c.length){var u=this.toCamelCase(c[1]);a[u]=Object.assign({},c[3]?l({},this.toCamelCase(c[3]),this.normalizeValue(d)):{enabled:""===d||"true"===d},a[u])}}return{validators:a}}},{key:"normalizeValue",value:function e(t){return"true"===t||"false"!==t&&t}},{key:"toUpperCase",value:function e(t){return t.charAt(1).toUpperCase()}},{key:"toCamelCase",value:function e(t){return t.replace(/-./g,this.toUpperCase)}}]),n}(b),A=function(e){r(n,e);var t=c(n);function n(){var e;return i(this,n),(e=t.call(this,{})).onValidHandler=e.onFormValid.bind(d(e)),e}return a(n,[{key:"install",value:function e(){if(this.core.getFormElement().querySelectorAll('[type="submit"][name="submit"]').length)throw Error("Do not use `submit` for the name attribute of submit button");this.core.on("core.form.valid",this.onValidHandler)}},{key:"uninstall",value:function e(){this.core.off("core.form.valid",this.onValidHandler)}},{key:"onFormValid",value:function e(){var t=this.core.getFormElement();t instanceof HTMLFormElement&&t.submit()}}]),n}(b),F=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).opts=e||{},a.triggerExecutedHandler=a.onTriggerExecuted.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.core.on("plugins.trigger.executed",this.triggerExecutedHandler)}},{key:"uninstall",value:function e(){this.core.off("plugins.trigger.executed",this.triggerExecutedHandler)}},{key:"onTriggerExecuted",value:function e(t){if(this.opts[t.field]){var i,n=f(this.opts[t.field].split(" "));try{for(n.s();!(i=n.n()).done;){var a=i.value.trim();this.opts[a]&&this.core.revalidateField(a)}}catch(l){n.e(l)}finally{n.f()}}}}]),n}(b),C=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).opts=Object.assign({},{excluded:n.defaultIgnore},e),a.ignoreValidationFilter=a.ignoreValidation.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.core.registerFilter("element-ignored",this.ignoreValidationFilter)}},{key:"uninstall",value:function e(){this.core.deregisterFilter("element-ignored",this.ignoreValidationFilter)}},{key:"ignoreValidation",value:function e(t,i,n){return this.opts.excluded.apply(this,[t,i,n])}}],[{key:"defaultIgnore",value:function e(t,i,n){var a=!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length),l=i.getAttribute("disabled");return""===l||"disabled"===l||"hidden"===i.getAttribute("type")||!a}}]),n}(b),H=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).statuses=new Map,a.opts=Object.assign({},{onStatusChanged:function e(){}},e),a.elementValidatingHandler=a.onElementValidating.bind(d(a)),a.elementValidatedHandler=a.onElementValidated.bind(d(a)),a.elementNotValidatedHandler=a.onElementNotValidated.bind(d(a)),a.elementIgnoredHandler=a.onElementIgnored.bind(d(a)),a.fieldAddedHandler=a.onFieldAdded.bind(d(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.core.on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}},{key:"uninstall",value:function e(){this.statuses.clear(),this.core.off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"areFieldsValid",value:function e(){return Array.from(this.statuses.values()).every(function(e){return"Valid"===e||"NotValidated"===e||"Ignored"===e})}},{key:"getStatuses",value:function e(){return this.statuses}},{key:"onFieldAdded",value:function e(t){this.statuses.set(t.field,"NotValidated")}},{key:"onFieldRemoved",value:function e(t){this.statuses.has(t.field)&&this.statuses.delete(t.field),this.opts.onStatusChanged(this.areFieldsValid())}},{key:"onElementValidating",value:function e(t){this.statuses.set(t.field,"Validating"),this.opts.onStatusChanged(!1)}},{key:"onElementValidated",value:function e(t){this.statuses.set(t.field,t.valid?"Valid":"Invalid"),t.valid?this.opts.onStatusChanged(this.areFieldsValid()):this.opts.onStatusChanged(!1)}},{key:"onElementNotValidated",value:function e(t){this.statuses.set(t.field,"NotValidated"),this.opts.onStatusChanged(!1)}},{key:"onElementIgnored",value:function e(t){this.statuses.set(t.field,"Ignored"),this.opts.onStatusChanged(this.areFieldsValid())}}]),n}(b);function x(e,t){var i=[],n=[];Object.keys(t).forEach(function(e){e&&(t[e]?i.push(e):n.push(e))}),n.forEach(function(t){return function e(t,i){i.split(" ").forEach(function(e){t.classList?t.classList.remove(e):t.className=t.className.replace(e,"")})}(e,t)}),i.forEach(function(t){return function e(t,i){i.split(" ").forEach(function(e){t.classList?t.classList.add(e):" ".concat(t.className," ").indexOf(" ".concat(e," "))&&(t.className+=" ".concat(e))})}(e,t)})}function I(e,t){var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return i?i.call(e,t):[].slice.call(e.parentElement.querySelectorAll(t)).indexOf(e)>=0}function w(e,t){for(var i=e;i&&!I(i,t);)i=i.parentElement;return i}var S=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).useDefaultContainer=!1,a.messages=new Map,a.defaultContainer=document.createElement("div"),a.useDefaultContainer=!e||!e.container,a.opts=Object.assign({},{container:function e(t,i){return a.defaultContainer}},e),a.elementIgnoredHandler=a.onElementIgnored.bind(d(a)),a.fieldAddedHandler=a.onFieldAdded.bind(d(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(d(a)),a.validatorValidatedHandler=a.onValidatorValidated.bind(d(a)),a.validatorNotValidatedHandler=a.onValidatorNotValidated.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.useDefaultContainer&&this.core.getFormElement().appendChild(this.defaultContainer),this.core.on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler).on("core.validator.validated",this.validatorValidatedHandler).on("core.validator.notvalidated",this.validatorNotValidatedHandler)}},{key:"uninstall",value:function e(){this.useDefaultContainer&&this.core.getFormElement().removeChild(this.defaultContainer),this.messages.forEach(function(e){return e.parentNode.removeChild(e)}),this.messages.clear(),this.core.off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler).off("core.validator.validated",this.validatorValidatedHandler).off("core.validator.notvalidated",this.validatorNotValidatedHandler)}},{key:"onFieldAdded",value:function e(t){var i=this,n=t.elements;n&&(n.forEach(function(e){var t=i.messages.get(e);t&&(t.parentNode.removeChild(t),i.messages.delete(e))}),this.prepareFieldContainer(t.field,n))}},{key:"onFieldRemoved",value:function e(t){var i=this;if(t.elements.length&&t.field){var n=t.elements[0].getAttribute("type");("radio"===n||"checkbox"===n?[t.elements[0]]:t.elements).forEach(function(e){if(i.messages.has(e)){var t=i.messages.get(e);t.parentNode.removeChild(t),i.messages.delete(e)}})}}},{key:"prepareFieldContainer",value:function e(t,i){var n=this;if(i.length){var a=i[0].getAttribute("type");"radio"===a||"checkbox"===a?this.prepareElementContainer(t,i[0],i):i.forEach(function(e){return n.prepareElementContainer(t,e,i)})}}},{key:"prepareElementContainer",value:function e(t,i,n){if("string"==typeof this.opts.container){var a,l="#"===this.opts.container.charAt(0)?'[id="'.concat(this.opts.container.substring(1),'"]'):this.opts.container;a=this.core.getFormElement().querySelector(l)}else a=this.opts.container(t,i);var r=document.createElement("div");a.appendChild(r),x(r,{"fv-plugins-message-container":!0}),this.core.emit("plugins.message.placed",{element:i,elements:n,field:t,messageElement:r}),this.messages.set(i,r)}},{key:"getMessage",value:function e(t){return"string"==typeof t.message?t.message:t.message[this.core.getLocale()]}},{key:"onValidatorValidated",value:function e(t){var i=t.elements,n=t.element.getAttribute("type"),a=("radio"===n||"checkbox"===n)&&i.length>0?i[0]:t.element;if(this.messages.has(a)){var r=this.messages.get(a),s=r.querySelector('[data-field="'.concat(t.field,'"][data-validator="').concat(t.validator,'"]'));if(s||t.result.valid)s&&!t.result.valid?(s.innerHTML=this.getMessage(t.result),this.core.emit("plugins.message.displayed",{element:t.element,field:t.field,message:t.result.message,messageElement:s,meta:t.result.meta,validator:t.validator})):s&&t.result.valid&&r.removeChild(s);else{var o=document.createElement("div");o.innerHTML=this.getMessage(t.result),o.setAttribute("data-field",t.field),o.setAttribute("data-validator",t.validator),this.opts.clazz&&x(o,l({},this.opts.clazz,!0)),r.appendChild(o),this.core.emit("plugins.message.displayed",{element:t.element,field:t.field,message:t.result.message,messageElement:o,meta:t.result.meta,validator:t.validator})}}}},{key:"onValidatorNotValidated",value:function e(t){var i=t.elements,n=t.element.getAttribute("type"),a="radio"===n||"checkbox"===n?i[0]:t.element;if(this.messages.has(a)){var l=this.messages.get(a),r=l.querySelector('[data-field="'.concat(t.field,'"][data-validator="').concat(t.validator,'"]'));r&&l.removeChild(r)}}},{key:"onElementIgnored",value:function e(t){var i=t.elements,n=t.element.getAttribute("type"),a="radio"===n||"checkbox"===n?i[0]:t.element;if(this.messages.has(a)){var l=this.messages.get(a);[].slice.call(l.querySelectorAll('[data-field="'.concat(t.field,'"]'))).forEach(function(e){l.removeChild(e)})}}}],[{key:"getClosestContainer",value:function e(t,i,n){for(var a=t;a&&a!==i&&(a=a.parentElement,!n.test(a.className)););return a}}]),n}(b),N=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).results=new Map,a.containers=new Map,a.MESSAGE_PLUGIN="___frameworkMessage",a.opts=Object.assign({},{defaultMessageContainer:!0,eleInvalidClass:"",eleValidClass:"",rowClasses:"",rowValidatingClass:""},e),a.elementIgnoredHandler=a.onElementIgnored.bind(d(a)),a.elementValidatingHandler=a.onElementValidating.bind(d(a)),a.elementValidatedHandler=a.onElementValidated.bind(d(a)),a.elementNotValidatedHandler=a.onElementNotValidated.bind(d(a)),a.iconPlacedHandler=a.onIconPlaced.bind(d(a)),a.fieldAddedHandler=a.onFieldAdded.bind(d(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(d(a)),a.messagePlacedHandler=a.onMessagePlaced.bind(d(a)),a}return a(n,[{key:"install",value:function e(){var t,i=this;x(this.core.getFormElement(),(l(t={},this.opts.formClass,!0),l(t,"fv-plugins-framework",!0),t)),this.core.on("core.element.ignored",this.elementIgnoredHandler).on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("plugins.icon.placed",this.iconPlacedHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler),this.opts.defaultMessageContainer&&(this.core.registerPlugin(this.MESSAGE_PLUGIN,new S({clazz:this.opts.messageClass,container:function e(t,n){var a="string"==typeof i.opts.rowSelector?i.opts.rowSelector:i.opts.rowSelector(t,n),l=w(n,a);return S.getClosestContainer(n,l,i.opts.rowPattern)}})),this.core.on("plugins.message.placed",this.messagePlacedHandler))}},{key:"uninstall",value:function e(){var t;this.results.clear(),this.containers.clear(),x(this.core.getFormElement(),(l(t={},this.opts.formClass,!1),l(t,"fv-plugins-framework",!1),t)),this.core.off("core.element.ignored",this.elementIgnoredHandler).off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("plugins.icon.placed",this.iconPlacedHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler),this.opts.defaultMessageContainer&&(this.core.deregisterPlugin(this.MESSAGE_PLUGIN),this.core.off("plugins.message.placed",this.messagePlacedHandler))}},{key:"onIconPlaced",value:function e(t){}},{key:"onMessagePlaced",value:function e(t){}},{key:"onFieldAdded",value:function e(t){var i=this,n=t.elements;n&&(n.forEach(function(e){var t,n=i.containers.get(e);n&&(x(n,(l(t={},i.opts.rowInvalidClass,!1),l(t,i.opts.rowValidatingClass,!1),l(t,i.opts.rowValidClass,!1),l(t,"fv-plugins-icon-container",!1),t)),i.containers.delete(e))}),this.prepareFieldContainer(t.field,n))}},{key:"onFieldRemoved",value:function e(t){var i=this;t.elements.forEach(function(e){var t,n=i.containers.get(e);n&&x(n,(l(t={},i.opts.rowInvalidClass,!1),l(t,i.opts.rowValidatingClass,!1),l(t,i.opts.rowValidClass,!1),t))})}},{key:"prepareFieldContainer",value:function e(t,i){var n=this;if(i.length){var a=i[0].getAttribute("type");"radio"===a||"checkbox"===a?this.prepareElementContainer(t,i[0]):i.forEach(function(e){return n.prepareElementContainer(t,e)})}}},{key:"prepareElementContainer",value:function e(t,i){var n,a="string"==typeof this.opts.rowSelector?this.opts.rowSelector:this.opts.rowSelector(t,i),r=w(i,a);r!==i&&(x(r,(l(n={},this.opts.rowClasses,!0),l(n,"fv-plugins-icon-container",!0),n)),this.containers.set(i,r))}},{key:"onElementValidating",value:function e(t){var i,n=t.elements,a=t.element.getAttribute("type"),r="radio"===a||"checkbox"===a?n[0]:t.element,s=this.containers.get(r);s&&x(s,(l(i={},this.opts.rowInvalidClass,!1),l(i,this.opts.rowValidatingClass,!0),l(i,this.opts.rowValidClass,!1),i))}},{key:"onElementNotValidated",value:function e(t){this.removeClasses(t.element,t.elements)}},{key:"onElementIgnored",value:function e(t){this.removeClasses(t.element,t.elements)}},{key:"removeClasses",value:function e(t,i){var n,a=this,r=t.getAttribute("type"),s="radio"===r||"checkbox"===r?i[0]:t;i.forEach(function(e){var t;x(e,(l(t={},a.opts.eleValidClass,!1),l(t,a.opts.eleInvalidClass,!1),t))});var o=this.containers.get(s);o&&x(o,(l(n={},this.opts.rowInvalidClass,!1),l(n,this.opts.rowValidatingClass,!1),l(n,this.opts.rowValidClass,!1),n))}},{key:"onElementValidated",value:function e(t){var i=this,n=t.elements,a=t.element.getAttribute("type"),r="radio"===a||"checkbox"===a?n[0]:t.element;n.forEach(function(e){var n;x(e,(l(n={},i.opts.eleValidClass,t.valid),l(n,i.opts.eleInvalidClass,!t.valid),n))});var s=this.containers.get(r);if(s){if(t.valid){this.results.delete(r);var o,d,c=!0;this.containers.forEach(function(e,t){e===s&&!1===i.results.get(t)&&(c=!1)}),c&&x(s,(l(d={},this.opts.rowInvalidClass,!1),l(d,this.opts.rowValidatingClass,!1),l(d,this.opts.rowValidClass,!0),d))}else this.results.set(r,!1),x(s,(l(o={},this.opts.rowInvalidClass,!0),l(o,this.opts.rowValidatingClass,!1),l(o,this.opts.rowValidClass,!1),o))}}}]),n}(b),L=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).icons=new Map,a.opts=Object.assign({},{invalid:"fv-plugins-icon--invalid",onPlaced:function e(){},onSet:function e(){},valid:"fv-plugins-icon--valid",validating:"fv-plugins-icon--validating"},e),a.elementValidatingHandler=a.onElementValidating.bind(d(a)),a.elementValidatedHandler=a.onElementValidated.bind(d(a)),a.elementNotValidatedHandler=a.onElementNotValidated.bind(d(a)),a.elementIgnoredHandler=a.onElementIgnored.bind(d(a)),a.fieldAddedHandler=a.onFieldAdded.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.core.on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler)}},{key:"uninstall",value:function e(){this.icons.forEach(function(e){return e.parentNode.removeChild(e)}),this.icons.clear(),this.core.off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler)}},{key:"onFieldAdded",value:function e(t){var i=this,n=t.elements;n&&(n.forEach(function(e){var t=i.icons.get(e);t&&(t.parentNode.removeChild(t),i.icons.delete(e))}),this.prepareFieldIcon(t.field,n))}},{key:"prepareFieldIcon",value:function e(t,i){var n=this;if(i.length){var a=i[0].getAttribute("type");"radio"===a||"checkbox"===a?this.prepareElementIcon(t,i[0]):i.forEach(function(e){return n.prepareElementIcon(t,e)})}}},{key:"prepareElementIcon",value:function e(t,i){var n=document.createElement("i");n.setAttribute("data-field",t),i.parentNode.insertBefore(n,i.nextSibling),x(n,{"fv-plugins-icon":!0});var a={classes:{invalid:this.opts.invalid,valid:this.opts.valid,validating:this.opts.validating},element:i,field:t,iconElement:n};this.core.emit("plugins.icon.placed",a),this.opts.onPlaced(a),this.icons.set(i,n)}},{key:"onElementValidating",value:function e(t){var i,n=this.setClasses(t.field,t.element,t.elements,(l(i={},this.opts.invalid,!1),l(i,this.opts.valid,!1),l(i,this.opts.validating,!0),i)),a={element:t.element,field:t.field,iconElement:n,status:"Validating"};this.core.emit("plugins.icon.set",a),this.opts.onSet(a)}},{key:"onElementValidated",value:function e(t){var i,n=this.setClasses(t.field,t.element,t.elements,(l(i={},this.opts.invalid,!t.valid),l(i,this.opts.valid,t.valid),l(i,this.opts.validating,!1),i)),a={element:t.element,field:t.field,iconElement:n,status:t.valid?"Valid":"Invalid"};this.core.emit("plugins.icon.set",a),this.opts.onSet(a)}},{key:"onElementNotValidated",value:function e(t){var i,n=this.setClasses(t.field,t.element,t.elements,(l(i={},this.opts.invalid,!1),l(i,this.opts.valid,!1),l(i,this.opts.validating,!1),i)),a={element:t.element,field:t.field,iconElement:n,status:"NotValidated"};this.core.emit("plugins.icon.set",a),this.opts.onSet(a)}},{key:"onElementIgnored",value:function e(t){var i,n=this.setClasses(t.field,t.element,t.elements,(l(i={},this.opts.invalid,!1),l(i,this.opts.valid,!1),l(i,this.opts.validating,!1),i)),a={element:t.element,field:t.field,iconElement:n,status:"Ignored"};this.core.emit("plugins.icon.set",a),this.opts.onSet(a)}},{key:"setClasses",value:function e(t,i,n,a){var l=i.getAttribute("type"),r="radio"===l||"checkbox"===l?n[0]:i;if(!this.icons.has(r))return null;var s=this.icons.get(r);return x(s,a),s}}]),n}(b),O=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).invalidFields=new Map,a.opts=Object.assign({},{enabled:!0},e),a.validatorHandler=a.onValidatorValidated.bind(d(a)),a.shouldValidateFilter=a.shouldValidate.bind(d(a)),a.fieldAddedHandler=a.onFieldAdded.bind(d(a)),a.elementNotValidatedHandler=a.onElementNotValidated.bind(d(a)),a.elementValidatingHandler=a.onElementValidating.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.core.on("core.validator.validated",this.validatorHandler).on("core.field.added",this.fieldAddedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("core.element.validating",this.elementValidatingHandler).registerFilter("field-should-validate",this.shouldValidateFilter)}},{key:"uninstall",value:function e(){this.invalidFields.clear(),this.core.off("core.validator.validated",this.validatorHandler).off("core.field.added",this.fieldAddedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("core.element.validating",this.elementValidatingHandler).deregisterFilter("field-should-validate",this.shouldValidateFilter)}},{key:"shouldValidate",value:function e(t,i,n,a){return!((!0===this.opts.enabled||!0===this.opts.enabled[t])&&this.invalidFields.has(i)&&this.invalidFields.get(i).length&&-1===this.invalidFields.get(i).indexOf(a))}},{key:"onValidatorValidated",value:function e(t){var i=this.invalidFields.has(t.element)?this.invalidFields.get(t.element):[],n=i.indexOf(t.validator);t.result.valid&&n>=0?i.splice(n,1):t.result.valid||-1!==n||i.push(t.validator),this.invalidFields.set(t.element,i)}},{key:"onFieldAdded",value:function e(t){t.elements&&this.clearInvalidFields(t.elements)}},{key:"onElementNotValidated",value:function e(t){this.clearInvalidFields(t.elements)}},{key:"onElementValidating",value:function e(t){this.clearInvalidFields(t.elements)}},{key:"clearInvalidFields",value:function e(t){var i=this;t.forEach(function(e){return i.invalidFields.delete(e)})}}]),n}(b),T=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).isFormValid=!1,a.opts=Object.assign({},{aspNetButton:!1,buttons:function e(t){return[].slice.call(t.querySelectorAll('[type="submit"]:not([formnovalidate])'))}},e),a.submitHandler=a.handleSubmitEvent.bind(d(a)),a.buttonClickHandler=a.handleClickEvent.bind(d(a)),a}return a(n,[{key:"install",value:function e(){var t=this;if(this.core.getFormElement() instanceof HTMLFormElement){var i=this.core.getFormElement();this.submitButtons=this.opts.buttons(i),i.setAttribute("novalidate","novalidate"),i.addEventListener("submit",this.submitHandler),this.hiddenClickedEle=document.createElement("input"),this.hiddenClickedEle.setAttribute("type","hidden"),i.appendChild(this.hiddenClickedEle),this.submitButtons.forEach(function(e){e.addEventListener("click",t.buttonClickHandler)})}}},{key:"uninstall",value:function e(){var t=this,i=this.core.getFormElement();i instanceof HTMLFormElement&&i.removeEventListener("submit",this.submitHandler),this.submitButtons.forEach(function(e){e.removeEventListener("click",t.buttonClickHandler)}),this.hiddenClickedEle.parentElement.removeChild(this.hiddenClickedEle)}},{key:"handleSubmitEvent",value:function e(t){this.validateForm(t)}},{key:"handleClickEvent",value:function e(t){if(t.currentTarget instanceof HTMLElement){if(this.opts.aspNetButton&&!0===this.isFormValid);else{this.core.getFormElement().removeEventListener("submit",this.submitHandler),this.clickedButton=t.target;var i=this.clickedButton.getAttribute("name"),n=this.clickedButton.getAttribute("value");i&&n&&(this.hiddenClickedEle.setAttribute("name",i),this.hiddenClickedEle.setAttribute("value",n)),this.validateForm(t)}}}},{key:"validateForm",value:function e(t){var i=this;t.preventDefault(),this.core.validate().then(function(e){"Valid"===e&&i.opts.aspNetButton&&!i.isFormValid&&i.clickedButton&&(i.isFormValid=!0,i.clickedButton.removeEventListener("click",i.buttonClickHandler),i.clickedButton.click())})}}]),n}(b),M=function(e){r(n,e);var t=c(n);function n(e){var a;return i(this,n),(a=t.call(this,e)).messages=new Map,a.opts=Object.assign({},{placement:"top",trigger:"click"},e),a.iconPlacedHandler=a.onIconPlaced.bind(d(a)),a.validatorValidatedHandler=a.onValidatorValidated.bind(d(a)),a.elementValidatedHandler=a.onElementValidated.bind(d(a)),a.documentClickHandler=a.onDocumentClicked.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.tip=document.createElement("div"),x(this.tip,l({"fv-plugins-tooltip":!0},"fv-plugins-tooltip--".concat(this.opts.placement),!0)),document.body.appendChild(this.tip),this.core.on("plugins.icon.placed",this.iconPlacedHandler).on("core.validator.validated",this.validatorValidatedHandler).on("core.element.validated",this.elementValidatedHandler),"click"===this.opts.trigger&&document.addEventListener("click",this.documentClickHandler)}},{key:"uninstall",value:function e(){this.messages.clear(),document.body.removeChild(this.tip),this.core.off("plugins.icon.placed",this.iconPlacedHandler).off("core.validator.validated",this.validatorValidatedHandler).off("core.element.validated",this.elementValidatedHandler),"click"===this.opts.trigger&&document.removeEventListener("click",this.documentClickHandler)}},{key:"onIconPlaced",value:function e(t){var i=this;(x(t.iconElement,{"fv-plugins-tooltip-icon":!0}),"hover"===this.opts.trigger)?(t.iconElement.addEventListener("mouseenter",function(e){return i.show(t.element,e)}),t.iconElement.addEventListener("mouseleave",function(e){return i.hide()})):t.iconElement.addEventListener("click",function(e){return i.show(t.element,e)})}},{key:"onValidatorValidated",value:function e(t){if(!t.result.valid){var i=t.elements,n=t.element.getAttribute("type"),a="radio"===n||"checkbox"===n?i[0]:t.element,l="string"==typeof t.result.message?t.result.message:t.result.message[this.core.getLocale()];this.messages.set(a,l)}}},{key:"onElementValidated",value:function e(t){if(t.valid){var i=t.elements,n=t.element.getAttribute("type"),a="radio"===n||"checkbox"===n?i[0]:t.element;this.messages.delete(a)}}},{key:"onDocumentClicked",value:function e(t){this.hide()}},{key:"show",value:function e(t,i){if(i.preventDefault(),i.stopPropagation(),this.messages.has(t)){x(this.tip,{"fv-plugins-tooltip--hide":!1}),this.tip.innerHTML='<div class="fv-plugins-tooltip__content">'.concat(this.messages.get(t),"</div>");var n=i.target.getBoundingClientRect(),a=this.tip.getBoundingClientRect(),l=a.height,r=a.width,s=0,o=0;switch(this.opts.placement){case"bottom":s=n.top+n.height,o=n.left+n.width/2-r/2;break;case"bottom-left":s=n.top+n.height,o=n.left;break;case"bottom-right":s=n.top+n.height,o=n.left+n.width-r;break;case"left":s=n.top+n.height/2-l/2,o=n.left-r;break;case"right":s=n.top+n.height/2-l/2,o=n.left+n.width;break;case"top-left":s=n.top-l,o=n.left;break;case"top-right":s=n.top-l,o=n.left+n.width-r;break;default:s=n.top-l,o=n.left+n.width/2-r/2}var d=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;s+=d,o+=c,this.tip.setAttribute("style","top: ".concat(s,"px; left: ").concat(o,"px"))}}},{key:"hide",value:function e(){x(this.tip,{"fv-plugins-tooltip--hide":!0})}}]),n}(b),P=function(e){r(n,e);var t=c(n);function n(e){i(this,n),(a=t.call(this,e)).handlers=[],a.timers=new Map;var a,l=document.createElement("div");return a.defaultEvent="oninput"in l?"input":"keyup",a.opts=Object.assign({},{delay:0,event:a.defaultEvent,threshold:0},e),a.fieldAddedHandler=a.onFieldAdded.bind(d(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(d(a)),a}return a(n,[{key:"install",value:function e(){this.core.on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}},{key:"uninstall",value:function e(){this.handlers.forEach(function(e){return e.element.removeEventListener(e.event,e.handler)}),this.handlers=[],this.timers.forEach(function(e){return window.clearTimeout(e)}),this.timers.clear(),this.core.off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"prepareHandler",value:function e(t,i){var n=this;i.forEach(function(e){var i=[];if(n.opts.event&&!1===n.opts.event[t])i=[];else if(n.opts.event&&n.opts.event[t]&&"function"!=typeof n.opts.event[t])i=n.opts.event[t].split(" ");else if("string"==typeof n.opts.event&&n.opts.event!==n.defaultEvent)i=n.opts.event.split(" ");else{var a=e.getAttribute("type"),l=e.tagName.toLowerCase();i=["radio"===a||"checkbox"===a||"file"===a||"select"===l?"change":n.ieVersion>=10&&e.getAttribute("placeholder")?"keyup":n.defaultEvent]}i.forEach(function(i){var a=function i(a){return n.handleEvent(a,t,e)};n.handlers.push({element:e,event:i,field:t,handler:a}),e.addEventListener(i,a)})})}},{key:"handleEvent",value:function e(t,i,n){var a=this;if(this.exceedThreshold(i,n)&&this.core.executeFilter("plugins-trigger-should-validate",!0,[i,n])){var l=function e(){return a.core.validateElement(i,n).then(function(e){a.core.emit("plugins.trigger.executed",{element:n,event:t,field:i})})},r=this.opts.delay[i]||this.opts.delay;if(0===r)l();else{var s=this.timers.get(n);s&&window.clearTimeout(s),this.timers.set(n,window.setTimeout(l,1e3*r))}}}},{key:"onFieldAdded",value:function e(t){this.handlers.filter(function(e){return e.field===t.field}).forEach(function(e){return e.element.removeEventListener(e.event,e.handler)}),this.prepareHandler(t.field,t.elements)}},{key:"onFieldRemoved",value:function e(t){this.handlers.filter(function(e){return e.field===t.field&&t.elements.indexOf(e.element)>=0}).forEach(function(e){return e.element.removeEventListener(e.event,e.handler)})}},{key:"exceedThreshold",value:function e(t,i){var n=0!==this.opts.threshold[t]&&0!==this.opts.threshold&&(this.opts.threshold[t]||this.opts.threshold);return!n||-1!==["button","checkbox","file","hidden","image","radio","reset","submit"].indexOf(i.getAttribute("type"))||this.core.getElementValue(t,i).length>=n}}]),n}(b);e.Plugin=b,e.algorithms={luhn:t,mod11And10:function e(t){for(var i=t.length,n=5,a=0;a<i;a++)n=(2*(n||10)%11+parseInt(t.charAt(a),10))%10;return 1===n},mod37And36:function e(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=t.length,a=i.length,l=Math.floor(a/2),r=0;r<n;r++)l=(2*(l||a)%(a+1)+i.indexOf(t.charAt(r)))%a;return 1===l},verhoeff:function e(t){for(var i=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],n=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],a=t.reverse(),l=0,r=0;r<a.length;r++)l=i[l][n[r%8][a[r]]];return 0===l}},e.filters={getFieldValue:h},e.formValidation=function e(t,i){var n=Object.assign({},{fields:{},locale:"en_US",plugins:{},init:function e(t){}},i),a=new y(t,n.fields);return a.setLocale(n.locale,n.localization),Object.keys(n.plugins).forEach(function(e){return a.registerPlugin(e,n.plugins[e])}),Object.keys(_).forEach(function(e){return a.registerValidator(e,_[e])}),n.init(a),Object.keys(n.fields).forEach(function(e){return a.addField(e,n.fields[e])}),a},e.locales={},e.plugins={Alias:k,Aria:E,Declarative:V,DefaultSubmit:A,Dependency:F,Excluded:C,FieldStatus:H,Framework:N,Icon:L,Message:S,Sequence:O,SubmitButton:T,Tooltip:M,Trigger:P},e.utils={call:m,classSet:x,closest:w,fetch:$,format:v,hasClass:function e(t,i){return t.classList?t.classList.contains(i):RegExp("(^| )".concat(i,"( |$)"),"gi").test(t.className)},isValidDate:p},e.validators=_,Object.defineProperty(e,"__esModule",{value:!0})});